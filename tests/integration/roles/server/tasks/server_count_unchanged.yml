---
- name: server exact count unchanged
  clc_server:
    location: "{{ location }}"
    name: "{{ server_name }}"
    template: "{{ server_template }}"
    exact_count: 2
    group: "{{ group_name }}"
    count_group: "{{ group_name }}"
    cpu: 1
    memory: 1
    ttl: 7200
    wait: True
  register: server_exact_count_unchanged
- name: assert server exact count unchanged
  assert:
    that:
      - server_exact_count_unchanged.changed == False

- name: server maximum count unchanged
  clc_server:
    location: "{{ location }}"
    name: "{{ server_name }}"
    template: "{{ server_template }}"
    max_count: 3
    group: "{{ group_name }}"
    count_group: "{{ group_name }}"
    cpu: 1
    memory: 1
    ttl: 7200
    wait: True
  register: server_maximum_count_unchanged
- name: assert server maximum count unchanged
  assert:
    that:
      - server_maximum_count_unchanged.changed == False

- name: server minimum count unchanged
  clc_server:
    location: "{{ location }}"
    name: "{{ server_name }}"
    template: "{{ server_template }}"
    min_count: 1
    group: "{{ group_name }}"
    count_group: "{{ group_name }}"
    cpu: 1
    memory: 1
    ttl: 7200
    wait: True
  register: server_minimum_count_unchanged
- name: assert server minimum count unchanged
  assert:
    that:
      - server_minimum_count_unchanged.changed == False
